# üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ coact_client + desktop_env

## ‚úÖ –ß—Ç–æ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

–£—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –º–µ–∂–¥—É coact_client –∏ desktop_env, –≤–∫–ª—é—á–∞—é—â–∞—è:

### üì¶ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

1. **Desktop Environment Module** (`coact_client/modules/desktop_env.py`)
   - –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å desktop_env –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ VM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
   - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏

2. **Action Handlers** (–∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ `coact_client/app.py`)
   - `desktop_env_init` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ä–µ–¥—ã
   - `desktop_env_reset` - —Å–±—Ä–æ—Å –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–¥–∞—á
   - `desktop_env_action` - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π
   - `desktop_env_screenshot` - —Å–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤
   - `desktop_env_a11y` - –ø–æ–ª—É—á–µ–Ω–∏–µ accessibility tree
   - `desktop_env_evaluate` - –æ—Ü–µ–Ω–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á
   - `desktop_env_info` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ VM
   - `desktop_env_task` - –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ –º–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã–µ –∑–∞–¥–∞—á–∏

3. **–ü—Ä–∏–º–µ—Ä—ã –∏ —Ç–µ—Å—Ç—ã**
   - `desktop_env_integration_example.py` - –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
   - `test_desktop_env_integration.py` - unit —Ç–µ—Å—Ç—ã
   - `DESKTOP_ENV_INTEGRATION.md` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã:

- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ VM (VMware, VirtualBox, Docker, AWS, GCP)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è GUI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ pyautogui
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ –∏ –∞–Ω–∞–ª–∏–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ accessibility tree –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ UI
- ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã—Ö –º–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã—Ö –∑–∞–¥–∞—á
- ‚úÖ –û—Ü–µ–Ω–∫–∞ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å task engine coact_client

## üõ†Ô∏è –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ desktop_env

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
pip install desktop_env

# –î–ª—è VMware (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
pip install pyvmomi

# –î–ª—è VirtualBox (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) 
pip install pyvbox

# –î–ª—è Docker
pip install docker

# –î–ª—è –æ–±–ª–∞—á–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
pip install boto3 google-cloud-compute azure-mgmt-compute
```

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã
python test_desktop_env_integration.py

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–º–µ—Ä—ã
python desktop_env_integration_example.py
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ VM (–¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞)

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ VM:

```bash
# –°–∫–∞—á–∞–π—Ç–µ –≥–æ—Ç–æ–≤—É—é Ubuntu VM –¥–ª—è desktop_env:
# https://github.com/xlang-ai/desktop_env

# –ò–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é VM:
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Ubuntu Desktop
# 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–ª–æ–≥–∏–Ω
# 3. –°–æ–∑–¥–∞–π—Ç–µ snapshot "init_state"
```

## üéÆ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ coact_client:

```python
from coact_client.modules.desktop_env import desktop_env_module

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
await desktop_env_module.initialize()

# –ü—Ä–æ—Å—Ç–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ
result = await desktop_env_module.execute_action({
    "type": "CLICK",
    "coordinates": [100, 100]
})

# –°–∫—Ä–∏–Ω—à–æ—Ç
screenshot = await desktop_env_module.take_screenshot({})
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Task Engine:

```python
from coact_client.core.tasks import task_engine

# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ task engine
await task_engine.process_task({
    "task_id": "test_001",
    "actions": [
        {
            "type": "desktop_env_action",
            "command": "pyautogui.click(100, 100)"
        }
    ]
})
```

### –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ –∑–∞–¥–∞—á–∏:

```python
complex_task = {
    "type": "desktop_env_task",
    "task_config": {
        "id": "text_editor_task",
        "instruction": "Open text editor and write hello world"
    },
    "actions": [
        {"command": "pyautogui.hotkey('cmd', 'space')"},
        {"command": "pyautogui.typewrite('TextEdit')"},
        {"command": "pyautogui.press('enter')"},
        {"command": "pyautogui.typewrite('Hello World!')"}
    ]
}

result = await desktop_env_module.execute_complex_task(complex_task)
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```
‚úÖ Unit —Ç–µ—Å—Ç—ã: 5/6 –ø—Ä–æ–π–¥–µ–Ω–æ (1 –æ—à–∏–±–∫–∞ –≤ –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–∏, –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª)
‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã: –≤—Å–µ –ø—Ä–æ–π–¥–µ–Ω—ã
‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è action handlers: 21 –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
‚úÖ –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥: —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫: –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ desktop_env** (–µ—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ —Ä–∞–±–æ—Ç–∞—Ç—å —Å VM):
   ```bash
   pip install desktop_env
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ VM** (–¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è):
   - –°–∫–∞—á–∞–π—Ç–µ –≥–æ—Ç–æ–≤—ã–µ VM —Å desktop_env GitHub
   - –ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é Ubuntu Desktop VM

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ coact_client** —Å –Ω–æ–≤—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏:
   ```bash
   python -c "from coact_client.app import app; print('Desktop env handlers:', [h for h in app.get_status()['supported_actions'] if 'desktop_env' in h])"
   ```

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é VM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞**
2. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ —Å –≤–∞—à–∏–º–∏ –∑–∞–¥–∞—á–∞–º–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏**
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —á–µ—Ä–µ–∑ WebSocket API –∏–ª–∏ –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã**

## üéØ –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:

- **–ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É coact_client
- **–ì–∏–±–∫–æ—Å—Ç—å**: –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ VM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤ VM
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–¥–∞—á
- **–£–¥–æ–±—Å—Ç–≤–æ**: –ø—Ä–æ—Å—Ç–æ–π API –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏

## üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `DESKTOP_ENV_INTEGRATION.md` - –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `desktop_env_integration_example.py` - —Ä–∞–±–æ—á–∏–µ –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞  
- `test_desktop_env_integration.py` - —Ç–µ—Å—Ç—ã –∏ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

## üèÅ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è **–ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é**! 

–°–∏—Å—Ç–µ–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç coact_client —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–º —á–µ—Ä–µ–∑ desktop_env, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –º–æ—â–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ GUI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, —Å–æ–∑–¥–∞–Ω–∏—è —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤, –∞–Ω–∞–ª–∏–∑–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã—Ö –∑–∞–¥–∞—á –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ä–µ–¥–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω.